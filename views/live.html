<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>PUBPAY.me</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icon/favicon-16x16.png">
    <link rel="manifest" href="/images/icon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/stylesheets/style.css?v0.06">
    <link rel="stylesheet" href="/fonts/Inter-4.0/inter.css">
    
    <!-- Swiper.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

    <script src="/javascripts/qrious.min.js"></script>
    <script src="/javascripts/bolt11.min.js"></script>
    <script src="/javascripts/nostrtools.min.js"></script>
    
    <!-- Swiper.js for QR code slideshow -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <!-- HLS.js for live streaming support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  </head>
  <body class="live">
    <script type="module" src="/javascripts/live.js"></script>

    <!-- Note Loader Container -->
          <div id="noteLoaderContainer">
        <div action="" id="noteLoader">
          <!-- Portrait Swiper -->
          <div class="portrait-swiper">
            <div class="swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <img src="https://m.primal.net/Majo.jpg" alt="Max Demarco Vicky El Salvador Chain Duel Party PubPay">
                </div>
                <div class="swiper-slide">
                  <img src="https://i.nostr.build/itlLMXlxccOBG06L.jpg" alt="Roger 9000 Adopting Bitcoin After Party PubPay">
                </div>
                <div class="swiper-slide">
                  <img src="https://r2.primal.net/cache/0/c4/57/0c4571c1e9e51ba2dde56dc3af65726adac4e68299f5a5d3adf9bc09efb67e8f.jpg" alt="Network School Flute Piano PubPay">
                </div>
                <div class="swiper-slide">
                  <img src="https://r2.primal.net/cache/6/3e/9f/63e9f4b439c17fd2c88617210cbd91c6c9b1ee2be2d82f47a7085379dd183e3c.jpg" alt="Network School Flute Piano PubPay">
                </div>
                <div class="swiper-slide">
                  <img src="https://r2.primal.net/cache/b/f6/bd/bf6bde3a8c8e5568dd8ce9d2d32b31d6d4287281e9cb5650cd28cb740b9bf932.jpg" alt="PubPay Event">
                </div>
                <div class="swiper-slide">
                  <img src="https://r2a.primal.net/uploads2/8/af/e3/8afe3c42163ee657479c9d151e92e9058f9116cc05dd71829426e567020ec21e.png" alt="PubPay Event">
                </div>
              </div>
            </div>
          </div>

          <!-- Main Content Sections -->
          <div class="note-loader-content">
            <!-- App Header & Description -->
            <div class="app-header">
              <h1><span style="color: #4a75ff">PUB</span><span style="color: #000">PAY</span><span style="color: #0000001c">.me</span> <span style="color: #5f5f5f">Live</span></h1>
              <p class="app-description">
                Real time tip tracker
              </p>
            </div>
        
        <label for="note1LoaderInput">Enter note, event, or profile</label>
        <input type="text" id="note1LoaderInput" name="note1LoaderInput" value="" placeholder="note1abc123... or nevent1xyz789... or naddr1def456... or nprofile1ghi789...">
        <div id="noteLoaderError" class="error-message" style="display: none;"></div>
        <div class="button-container">
          <button id="note1LoaderSubmit" class="button">Load</button>
          <div class="styleOptionsModalToggle button outline">Style Options</div>
        </div>
        <div class="examples-section">
          <h3>Examples - Notes, Live Events & Profiles</h3>
          <div class="example-item">
            <a href="/live/note16a7m73en9w4artfclcnhqf8jzngepmg2j2et3l2yk0ksfhftv0ls3hugv7" target="_blank">
              Zap my set at at Plan B at Adopting Bitcoin after party ‚ö°Ô∏è
            </a>
            <div class="author-name">
              <img src="https://primal.b-cdn.net/media-upload?u=https%3A%2F%2Fmedia.primal.net%2Fuploads%2Fd%2F87%2F9f%2Fd879f18ec704fed0700a3c2befae75b0148822d19166feb9293192279864db82.jpg" alt="Roger 9000" class="author-avatar">
              Roger 9000
            </div>
          </div>
          <div class="example-item">
            <a href="/live/note1j8fpjg60gkw266lz86ywmyr2mmy5e6kfkhtfu4umaxneff6qeyhqrl37gu" target="_blank">
              Bienvenidos a nuestro querido el salvador üá∏üáª
            </a>
            <div class="author-name">
              <img src="https://cdn.satellite.earth/080a8d6c0664cd39b386a27f095d6dac8e223a26c69357e3e144da2d54dc39a3.png" alt="Vicky" class="author-avatar">
              Vicky
            </div>
          </div>
          <div class="example-item">
            <a href="/live/note1lsreglfs5s5zm6e8ssavaak2adsajkad27axp00rvz734u443znqspwhvv" target="_blank">
              The Network School of Rock is Live from Malaysia!
            </a>
            <div class="author-name">
              <img src="https://m.primal.net/QIbm.jpg" alt="lucas" class="author-avatar">
              lucas
            </div>
          </div>
          <div class="example-item">
            <a href="/live/nevent1qqsphk43g2pzpwfr8qcp5zdx8ftgaj7gvxk682y4sedjvscrsm0lpssc96mm3" target="_blank">
              Hola Barcelona! Pubpay me at the After Party of Bitcoin Cypher Conference!!!! @BCC 8333
            </a>
            <div class="author-name">
              <img src="https://i.nostr.build/itlLMXlxccOBG06L.jpg" alt="Roger 9000" class="author-avatar">
              Roger 9000
            </div>
          </div>
          
                   
          <div class="example-item">
            <a href="/live/naddr1qqjr2vehvyenvdtr94nrzetr956rgctr94skvvfs95eryep3x3snwve389nxyqg3waehxw309ahx7um5wgh8w6twv5hsygx0gknt5ymr44ldyyaq0rn3p5jpzkh8y8ymg773a06ytr4wldxz55psgqqqwensuq723w" target="_blank">
              NoGood Radio is a 24/7 pirate radio station running on scrap parts and broadcasting from a basement somewhere.
            </a>
            <div class="author-name">
              <img src="https://blossom.nogood.studio/458fee0afeba08618c9b9bea4f77b73d62f480c00dffe60d14b4b6a51045d122.jpg" alt="NoGood Radio" class="author-avatar">
              NoGood Radio
            </div>
          </div>
        </div>
        
        
        <!-- Footer -->
        <div class="note-loader-footer">
          <div class="footer-links">
            <a href="https://nostr.com" target="_blank" class="footer-link">
              Follow us
            </a>
            <a href="/" class="footer-link">
              Powered by PubPay
            </a>
          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main two-column layout -->
    <div id="mainLayout" class="main-layout">
      
      <!-- Background image overlay for the entire layout -->
      <div class="liveZapOverlay">
      </div>
      
      <!-- LEFT SIDE: Post/kind1 information (fixed, no scroll) -->
      <div class="left-side">
        <div class="post-info">
          <h3 class="section-label">Note Content</h3>
          
          <!-- Author Section -->
          <div class="author-section">
            <img id="authorNameProfileImg" class="author-image" src="/images/gradient_color.gif"/>
            <div class="author-info">
              <div id="authorName" class="author-name">Author</div>
            </div>
          </div>

          <!-- Note Content Section -->
          <div class="note-section">
            <div id="noteContent" class="note-content">
              <!-- Note content will be populated here -->
            </div>
          </div>

          <!-- QR Code Section -->
          <div class="qr-section">
            <!-- Swiper for QR Code slideshow -->
            <div class="swiper qr-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="qr-slide-title">Web <span class="qr-data-preview" id="qrDataPreview1"></span></div>
                  <a href="" target="_blank" id="qrcodeLinkNostr">
                    <img id="qrCode" class="qr-code">
                  </a>
                  <div class="qr-slide-label">Scan with Camera APP</div>
                </div>
                <div class="swiper-slide">
                  <div class="qr-slide-title">Nostr <span class="qr-data-preview" id="qrDataPreview2"></span></div>
                  <a href="" target="_blank" id="qrcodeNeventLink">
                    <img id="qrCodeNevent" class="qr-code">
                  </a>
                  <div class="qr-slide-label">Scan with Nostr client</div>
                </div>
                <div class="swiper-slide">
                  <div class="qr-slide-title">Nostr <span class="qr-data-preview" id="qrDataPreview3"></span></div>
                  <a href="" target="_blank" id="qrcodeNoteLink">
                    <img id="qrCodeNote" class="qr-code">
                  </a>
                  <div class="qr-slide-label">Scan with Nostr client</div>
                </div>
                <!-- Lightning Payment QR Slide -->
                <div class="swiper-slide lightning-qr-slide" id="lightningQRSlide" style="display: none;">
                  <div class="qr-slide-title">Lightning <span class="qr-data-preview" id="qrDataPreview4"></span></div>
                  <a href="" target="_blank" id="lightningQRLink">
                    <div id="lightningQRCode" class="qr-code"></div>
                  </a>
                  <div class="qr-slide-label">Scan with Lightning Wallet</div>
                </div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT SIDE: Zaps (can overflow/scroll) -->
      <div class="right-side">
        <div class="zaps-header">
          <div class="zaps-header-left">
            <span class="total-label">Total:</span>
            <span id="zappedTotalValue" class="total-amount">0</span>
            <span class="total-sats">sats</span>
            <span class="zap-count-separator">‚Ä¢</span>
            <span id="zappedTotalCount" class="total-count">0</span>
            <span class="total-zaps">zaps</span>
          </div>
          
          <div class="zaps-header-right">
            <button id="styleToggleBtn" class="style-toggle-btn">
              ‚öôÔ∏è
            </button>
            
            <div class="powered-by">
              <img id="partnerLogo" src="" alt="Partner Logo" style="display: none;">
              <a href="https://pubpay.me" target="_blank">
                <img src="/images/powered_by_white_bg.png">
              </a>
            </div>
          </div>
        </div>

        <!-- Top Zappers Bar -->
        <div id="top-zappers-bar" class="top-zappers-bar" style="display: none;">
          <div class="top-zappers-list">
            <div class="top-zapper" id="top-zapper-1">
              <div class="zapper-rank">1</div>
              <img class="zapper-avatar" src="/images/gradient_color.gif" alt="Top Zapper">
              <div class="zapper-info">
                <div class="zapper-name">Loading...</div>
                <div class="zapper-total">0 sats</div>
              </div>
            </div>
            <div class="top-zapper" id="top-zapper-2">
              <div class="zapper-rank">2</div>
              <img class="zapper-avatar" src="/images/gradient_color.gif" alt="Top Zapper">
              <div class="zapper-info">
                <div class="zapper-name">Loading...</div>
                <div class="zapper-total">0 sats</div>
              </div>
            </div>
            <div class="top-zapper" id="top-zapper-3">
              <div class="zapper-rank">3</div>
              <img class="zapper-avatar" src="/images/gradient_color.gif" alt="Top Zapper">
              <div class="zapper-info">
                <div class="zapper-name">Loading...</div>
                <div class="zapper-total">0 sats</div>
              </div>
            </div>
            <div class="top-zapper" id="top-zapper-4">
              <div class="zapper-rank">4</div>
              <img class="zapper-avatar" src="/images/gradient_color.gif" alt="Top Zapper">
              <div class="zapper-info">
                <div class="zapper-name">Loading...</div>
                <div class="zapper-total">0 sats</div>
              </div>
            </div>
            <div class="top-zapper" id="top-zapper-5">
              <div class="zapper-rank">5</div>
              <img class="zapper-avatar" src="/images/gradient_color.gif" alt="Top Zapper">
              <div class="zapper-info">
                <div class="zapper-name">Loading...</div>
                <div class="zapper-total">0 sats</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="zaps-container">
          <div id="zaps" class="zaps-list">
            <!-- Zaps will be populated here -->
          </div>
        </div>
      </div>

    </div>

    <!-- Style options modal -->
    <div id="styleOptionsModal">
      <div class="style-options-content">
        <div class="style-options-header">
          <h2>STYLE OPTIONS</h2>
          <button class="close-button">&times;</button>
        </div>

        <div class="style-options-body">
          <!-- Style Presets Section -->
          <div class="style-section">
            <h3 class="section-title">QUICK PRESETS</h3>
            <div class="presets-container">
                          <button class="preset-btn" data-preset="lightMode">Light Mode</button>
            <button class="preset-btn" data-preset="darkMode">Dark Mode</button>
            <button class="preset-btn" data-preset="cosmic">Cosmic</button>
            <button class="preset-btn" data-preset="vibrant">Vibrant</button>
            <button class="preset-btn" data-preset="electric">Electric</button>
            <button class="preset-btn" data-preset="warm">Warm</button>
            <button class="preset-btn" data-preset="adopting">Adopting</button>
            <button class="preset-btn" data-preset="bitcoinConf">Bitcoin Conf</button>
            </div>
          </div>
          <!-- Colors Section -->
          <div class="style-section">
            <h3 class="section-title">COLORS</h3>
            <div class="colors-container">
              <div class="style-option-group">
                <label for="textColorPicker">Text Color</label>
                <div class="color-picker-container">
                  <input type="color" id="textColorPicker" value="#000000">
                  <input type="text" id="textColorValue" value="#000000" placeholder="#000000">
                </div>
              </div>
              <div class="style-option-group">
                <label for="bgColorPicker">Background Color</label>
                <div class="color-picker-container">
                  <input type="color" id="bgColorPicker" value="#ffffff">
                  <input type="text" id="bgColorValue" value="#ffffff" placeholder="#ffffff">
                </div>
              </div>
            </div>
            <div class="opacity-container">
              <div class="style-option-group">
                <label for="textOpacitySlider">Text Opacity</label>
                <div class="slider-container">
                  <input type="range" id="textOpacitySlider" min="0.1" max="1.0" step="0.1" value="1.0">
                  <span id="textOpacityValue">100%</span>
                </div>
              </div>
              <div class="style-option-group">
                <label for="opacitySlider">Background Opacity</label>
                <div class="slider-container">
                  <input type="range" id="opacitySlider" min="0.0" max="1.0" step="0.1" value="1.0">
                  <span id="opacityValue">100%</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Background Section -->
          <div class="style-section">
            <h3 class="section-title">BACKGROUND</h3>
            <div class="style-option-group full-width">
              <label for="bgImagePreset">Choose Background</label>
              <div class="bg-preset-controls">
                <div class="preset-inputs">
                  <select id="bgImagePreset" class="bg-preset-select">
                    <option value="">No Background (Default)</option>
                    <option value="/images/adopting.webp">Adopting Bitcoin</option>
                    <option value="/images/sky.jpg">Sky</option>
                    <option value="/images/lightning.gif">Lightning</option>
                    <option value="/images/bitcoin-rocket.gif">Bitcoin Rocket</option>
                    <option value="/images/bitcoin-astronaut.gif">Bitcoin Astronaut</option>
                    <option value="/images/bitcoin-space.gif">Bitcoin Space</option>
                    <option value="/images/bitcoin-sunset.gif">Bitcoin Sunset</option>
                    <option value="/images/bitcoin-rotating.gif">Bitcoin Rotating</option>
                    <option value="/images/nostr-ostriches.gif">Nostr Ostriches</option>
                    <option value="/images/send-zaps.gif">Send Zaps</option>
                    <option value="/images/gm-nostr.gif">GM Nostr</option>
                    <option value="custom">Custom URL</option>
                  </select>
                  <div class="url-input-container" id="customUrlGroup" style="display: none;">
                    <input type="text" id="bgImageUrl" value="" placeholder="Enter image URL">
                    <button id="clearBgImage" class="clear-button">Clear</button>
                  </div>
                </div>
                <div class="preset-preview-container">
                  <img id="bgPresetPreview" src="" alt="No background">
                </div>
              </div>
            </div>
          </div>

          <!-- Partner Logo Section -->
          <div class="style-section">
            <h3 class="section-title">PARTNER LOGO</h3>
            <div class="style-option-group full-width">
              <label for="partnerLogoSelect">Partner Logo</label>
              <div class="partner-logo-controls">
                <div class="preset-inputs">
                  <select id="partnerLogoSelect" class="partner-logo-select">
                    <option value="">None (Default)</option>
                    <option value="https://adoptingbitcoin.org/images/AB-logo.svg">Adopting Bitcoin</option>
                    <option value="https://cdn.prod.website-files.com/6488b0b0fcd2d95f6b83c9d4/653bd44cf83c3b0498c2e622_bitcoin_conference.svg">Bitcoin Conference</option>
                    <option value="custom">Custom URL</option>
                  </select>
                  <div class="url-input-container" id="customPartnerLogoGroup" style="display: none;">
                    <input type="text" id="partnerLogoUrl" value="" placeholder="Enter logo URL">
                    <button id="clearPartnerLogo" class="clear-button">Clear</button>
                  </div>
                </div>
                <div class="preset-preview-container">
                  <img id="partnerLogoPreview" src="" alt="No partner logo" style="height: 30px; max-width: 100px; object-fit: contain;">
                </div>
              </div>
            </div>
          </div>

          <!-- Layout Section -->
          <div class="style-section">
            <h3 class="section-title">LAYOUT</h3>
            <div class="toggles-container">
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="layoutInvertToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Invert Layout</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="hideZapperContentToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Hide Zapper Content</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="showTopZappersToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Show All Time Zappers</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="podiumToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Top 3 Podium</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="zapGridToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Grid Layout</span>
                </label>
              </div>
            </div>
          </div>

          <!-- QR Code Effects Section -->
          <div class="style-section">
            <h3 class="section-title">QR CODE EFFECTS</h3>
            <div class="toggles-container">
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrInvertToggle" value="true">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Invert QR Code</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrScreenBlendToggle" value="true">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Screen Blend Mode</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrMultiplyBlendToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Multiply Blend Mode</span>
                </label>
              </div>
            </div>
          </div>

          <!-- QR Slide Visibility Section -->
          <div class="style-section">
            <h3 class="section-title">QR SLIDE VISIBILITY</h3>
            <div class="toggles-container">
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrShowWebLinkToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Show Web Link</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrShowNeventToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Show Nostr Event</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="qrShowNoteToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Show Note ID</span>
                </label>
              </div>
              <div class="style-option-group toggle-group">
                <label class="toggle-label">
                  <div class="toggle-switch">
                    <input type="checkbox" id="lightningToggle">
                    <span class="toggle-slider"></span>
                  </div>
                  <span>Enable Lightning Payments</span>
                </label>
              </div>
            </div>
            <!-- Lightning Payment Status -->
            <div class="lightning-status-container" id="lightningStatusContainer" style="display: none;">
              <div class="payment-status" id="paymentStatus">
                <!-- Status messages will appear here -->
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="style-actions">
          <button id="resetStyles" class="action-btn secondary">Reset</button>
          <button id="copyStyleUrl" class="action-btn primary">Copy Style URL</button>
        </div>
      </div>
    </div>

  </body>
</html>